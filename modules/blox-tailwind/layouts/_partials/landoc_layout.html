{{/*
  A mixture of Hugo Blox docs and landing pages. Basically, this is a docs
  page with the ability to put sections below the normal contents as in
  landing pages.

  The prose classes do not play well with blox sections, so they have been
  moved away from <main> to the specific <div> surrounding only the title and
  regular contents.
*/}}
<div class="mx-auto flex max-w-screen-xl">
  {{ partial "components/sidebar.html" (dict "context" . "no_sidebar" false) }}
  {{ partial "components/toc.html" . }}
  <article class="flex w-full min-w-0 min-h-[calc(100vh-var(--navbar-height))] justify-center break-words pb-8 pr-[calc(env(safe-area-inset-right)-1.5rem)]">
    <main class="w-full min-w-0 max-w-6xl px-6 pt-4 md:px-12">
      {{ if (.Params.show_breadcrumb | default true) }}
      <div class="mb-1">
	{{ partial "components/breadcrumb.html" . }}
      </div>
      {{ end }}

      <div class="content text-base prose prose-slate lg:prose-xl dark:prose-invert">
	<h1>{{ .Title }}</h1>
	{{ .Content }}
      </div>

      {{ range $index, $block := .Params.sections }}
	{{/* Do not show sections intended only for the demo site. */}}
	{{ if or (not $block.demo) ($block.demo | and (eq (os.Getenv "HUGO_BLOX_DEMO") "true")) }}
	  {{ partial "functions/parse_block_v2" (dict "page" $ "block" $block) }}
	{{ end }}
      {{ end }}

      {{ partial "components/last-edited.html" . }}
      {{ .Scratch.Set "invert_pager" true }}
      {{ partial "components/next-in-series.html" . }}
      {{ partial "comments.html" . }}
    </main>
  </article>
</div>
